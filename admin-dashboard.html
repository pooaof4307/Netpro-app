<!DOCTYPE html><html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard - ‡∏ù‡∏≤‡∏Å‡∏Ç‡∏≤‡∏¢‡πÑ‡∏≠‡∏î‡∏µ‡πÄ‡∏Å‡∏°</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      background-color: #f4f6f9;
    }
    .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background-color: #2c3e50;
      color: white;
      padding: 15px 25px;
    }
    .sidebar {
      width: 250px;
      background-color: #34495e;
      height: 100vh;
      position: fixed;
      top: 0;
      left: 0;
      padding-top: 60px;
    }
    .sidebar a {
      display: block;
      padding: 15px 25px;
      color: white;
      text-decoration: none;
      transition: background 0.3s;
    }
    .sidebar a:hover {
      background-color: #1abc9c;
    }
    .content {
      margin-left: 250px;
      padding: 25px;
    }
    .section {
      display: none;
    }
    .active {
      display: block;
    }
    .card {
      background: white;
      padding: 20px;
      margin-bottom: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }
    .login-box {
      max-width: 400px;
      margin: 100px auto;
      background: white;
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    .login-box input {
      width: 100%;
      padding: 12px;
      margin-bottom: 15px;
      border-radius: 8px;
      border: 1px solid #ccc;
    }
    .login-box button {
      width: 100%;
      padding: 12px;
      background: #1abc9c;
      border: none;
      color: white;
      font-size: 16px;
      border-radius: 8px;
      cursor: pointer;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    th, td {
      padding: 10px;
      text-align: left;
      border-bottom: 1px solid #eee;
    }
    th {
      background-color: #ecf0f1;
    }
    .action-btn {
      background: #3498db;
      color: white;
      border: none;
      padding: 6px 10px;
      margin-right: 5px;
      border-radius: 5px;
      cursor: pointer;
    }
    .action-btn.red { background: #e74c3c; }
    .action-btn.green { background: #2ecc71; }
  </style>
</head>
<body><div class="login-box" id="loginBox">
  <h2 style="text-align:center">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô</h2>
  <input type="email" id="adminEmail" placeholder="‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô">
  <input type="password" id="adminPass" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô">
  <button onclick="adminLogin()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
  <div id="loginMessage" style="margin-top:10px; color:red; text-align:center;"></div>
</div><div id="adminPanel" style="display:none">
  <div class="navbar">
    <div>Admin Dashboard</div>
    <button onclick="logout()" style="background:red; color:white; border:none; padding:8px 15px; border-radius:5px; cursor:pointer">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
  </div>  <div class="sidebar">
    <a href="#" onclick="showSection('dashboard')">üè† Dashboard</a>
    <a href="#" onclick="showSection('users')">üë§ ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</a>
    <a href="#" onclick="showSection('posts')">üìù ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÇ‡∏û‡∏™‡∏ï‡πå</a>
    <a href="#" onclick="showSection('gcoin')">üí∞ ‡∏£‡∏∞‡∏ö‡∏ö Gcoin</a>
    <a href="#" onclick="showSection('categories')">üóÇÔ∏è ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</a>
    <a href="#" onclick="showSection('logs')">üìÑ Logs</a>
  </div>  <div class="content">
    <div id="dashboard" class="section active">
      <div class="card">
        <h3>‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏£‡∏∞‡∏ö‡∏ö</h3>
        <p>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ: <span id="totalUsers">-</span></p>
        <p>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÇ‡∏û‡∏™‡∏ï‡πå: <span id="totalPosts">-</span></p>
        <p>‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡∏´‡∏°‡∏∏‡∏ô‡πÄ‡∏ß‡∏µ‡∏¢‡∏ô: <span id="totalGcoin">-</span> Gcoin</p>
      </div>
    </div><div id="users" class="section">
  <div class="card">
    <h3>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</h3>
    <div id="userTable">Loading...</div>
  </div>
</div>

<div id="posts" class="section">
  <div class="card">
    <h3>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÇ‡∏û‡∏™‡∏ï‡πå</h3>
    <div id="postTable">Loading...</div>
  </div>
</div>

<div id="gcoin" class="section">
  <div class="card">
    <h3>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç Gcoin</h3>
    <div id="gcoinManager">Loading...</div>
  </div>
</div>

<div id="categories" class="section">
  <div class="card">
    <h3>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡πÄ‡∏Å‡∏°</h3>
    <div id="categoryManager">Loading...</div>
  </div>
</div>

<div id="logs" class="section">
  <div class="card">
    <h3>Logs ‡∏£‡∏∞‡∏ö‡∏ö</h3>
    <div id="logContent">Loading...</div>
  </div>
</div>

  </div>
</div><script>
  const scriptURL = "https://script.google.com/macros/s/AKfycbym-g1ENvZbr5n11nKUo27ZX1R7tk1l9PZrC01WJx3VBF594n93iw_I_brCu6RW2Bahtw/exec";

  function showSection(sectionId) {
    document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
    document.getElementById(sectionId).classList.add('active');
  }

  function adminLogin() {
    const email = document.getElementById("adminEmail").value.trim();
    const pass = document.getElementById("adminPass").value.trim();
    const msg = document.getElementById("loginMessage");
    msg.textContent = "";

    fetch(scriptURL, {
      method: "POST",
      body: JSON.stringify({ action: "adminLogin", email, password: pass }),
      headers: { "Content-Type": "application/json" }
    })
    .then(res => res.json())
    .then(data => {
      if (data.status === "success") {
        document.getElementById("loginBox").style.display = "none";
        document.getElementById("adminPanel").style.display = "block";
        loadDashboard();
        loadUsers();
        loadPosts();
        loadGcoin();
        loadCategories();
        loadLogs();
      } else {
        msg.textContent = "‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á";
      }
    })
    .catch(err => {
      msg.textContent = "‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠";
      console.error(err);
    });
  }

  function logout() {
    location.reload();
  }

  function loadDashboard() {
    // future dashboard summary code
  }

  function loadUsers() {
    fetch(scriptURL + '?action=getUsers')
      .then(res => res.json())
      .then(data => {
        if (!data.users || data.users.length === 0) {
          document.getElementById("userTable").innerHTML = "‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ";
          return;
        }
        let html = '<table><thead><tr><th>‡∏ä‡∏∑‡πà‡∏≠</th><th>Email</th><th>UID</th><th>Gcoin</th><th>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th></tr></thead><tbody>';
        data.users.forEach(u => {
          html += `<tr>
            <td>${u.name}</td>
            <td>${u.email}</td>
            <td>${u.uid}</td>
            <td>${u.gcoin}</td>
            <td>
              <button class='action-btn green' onclick="editUserGcoin('${u.uid}')">‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç</button>
              <button class='action-btn red' onclick="banUser('${u.uid}')">‡πÅ‡∏ö‡∏ô</button>
            </td>
          </tr>`;
        });
        html += '</tbody></table>';
        document.getElementById("userTable").innerHTML = html;
      })
      .catch(err => {
        console.error(err);
        document.getElementById("userTable").innerHTML = "‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•";
      });
  }

  function loadPosts() {}
  function loadGcoin() {}
  function loadCategories() {}
  function loadLogs() {}
</script></body>
</html>

<style>
  #postText {
    width: 100%;
    height: 60px; /* ประมาณ 3 บรรทัด */
    resize: vertical; /* ให้ปรับขนาดแนวตั้งได้เล็กน้อย */
    font-size: 14px;
    padding: 6px;
  }
  .post {
    border: 1px solid #ddd;
    padding: 10px;
    margin-top: 10px;
    border-radius: 6px;
    background: #f9f9f9;
  }
  .share-btn {
    background-color: #1877f2;
    color: white;
    border: none;
    padding: 6px 12px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
    margin-top: 8px;
  }
</style>

<form id="postForm">
  <label>ข้อความขายไอดีเกม:</label><br>
  <textarea id="postText" placeholder="เขียนข้อความที่นี่..." required></textarea><br>

  <button type="submit">โพสต์ขายไอดี</button>
</form>

<div id="postsContainer"></div>

<script>
  document.getElementById('postForm').addEventListener('submit', function(e) {
    e.preventDefault();

    const text = document.getElementById('postText').value.trim();
    if (!text) return alert("กรุณาใส่ข้อความโพสต์");

    // สร้างโพสต์ใหม่ในหน้า
    const postDiv = document.createElement('div');
    postDiv.className = 'post';

    const contentP = document.createElement('p');
    contentP.textContent = text;
    postDiv.appendChild(contentP);

    // สร้างปุ่มแชร์
    const shareBtn = document.createElement('button');
    shareBtn.className = 'share-btn';
    shareBtn.textContent = 'แชร์โพสต์นี้';
    shareBtn.onclick = function() {
      if (navigator.share) {
        navigator.share({
          title: 'โพสต์ขายไอดีเกม',
          text: text,
          url: window.location.href
        }).then(() => {
          alert('แชร์สำเร็จ!');
        }).catch(console.error);
      } else {
        alert('เบราว์เซอร์ของคุณไม่รองรับการแชร์อัตโนมัติ');
      }
    };
    postDiv.appendChild(shareBtn);

    // เพิ่มโพสต์ใหม่ขึ้นบนสุด
    const container = document.getElementById('postsContainer');
    container.prepend(postDiv);

    // ล้าง textarea หลังโพสต์
    document.getElementById('postText').value = '';
  });
</script>
